<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>JOE Test</title>
<!--<link rel="stylesheet" type="text/css" href="css/joe-styles.css">
<script src="js/jquery-1.10.2.min.js"></script>
<script src="js/craydent-1.7.18.js"></script>
<script src="js/JsonObjectEditor.jquery.craydent.js"></script>-->
<script src="_joeinclude.js"></script>

</head>

<body>
Json Object Editor Demo Page


<div>
<h3>examples</h3>
<a href="javascript:_joe.show();">Show JOE</a><br/>

<a href="javascript:_joe.show(cat);">edit Cat</a><br/>

<a href="javascript:_joe.show(cat,{schema:'animal'});">edit Cat(animal)</a><br/>

<a href="javascript:_joe.show(animals,{schema:'animal'});">edit Animals</a><br/>

<a href="javascript:_joe.show({},{schema:'animal',callback:addAnimal});">Add Animal</a><br/>

<input onkeyup="alert($(this).val());" />
</div>
<script>
var cat = 
{	name:'tom', 
	legs:4,
	species:'cat',
	id:cuid(),
	hiddenizer:'the hidden field'
};
var dog =
{	name:'rover', 
	legs:4,
	species:'dog',
	id:cuid()
};

var rat =
{	name:'jerry', 
	legs:4,
	species:'rat',
	weight:3.5,
	id:cuid()
};

var animals =[cat,dog,rat];
var animalLinks = ['cat','dog','rat'];

function addAnimal(obj){
	animals.push(obj);
}

function getAnimals(obj){
	return animalLinks.filter(function(a){return a != obj.species;})
}

function adjustSchema(dom){
	var species = $(dom).val();
	if(species == "thing"){
		JOE.resetSchema('thing')
	}
	else{
		JOE.resetSchema('animal')
	
	}
}
function logValue(dom){
	logit($(dom).val());
}
var animalschema = 
	{
		_title:'Animal',
		fields:['id','name','legs','species','weight','color','gender','animalLink'],
		_listID:'id',
		_listTitle:'${name} ${species}',
		/*callback:function(obj){
			alert(obj.name);
		},*/
		onblur:logit
		
	}

var thingschema = 
	{
		_title:'Thing',
		fields:['id','name','thingType','legs','species','weight','color','gender'],
		_listID:'id',
		_listTitle:'${name} ${species}'
		
	}
	
	var specs = {
/*		defaultProfile:{
			lockedFields:['joeUpdated','id'],
			hiddenFields:[]
		},*/
		fields:{
			species:{label:'Species',type:'select', values:['cat','dog','rat','thing'], onchange:adjustSchema},
			gender:{type:'select', values:['male','female']},
			legs:{label:'# of Legs',type:'int', onblur:logit},
			weight:{label:' Weight (lbs)',type:'number', onblur:logit},
			name:{label:' pet Name', onkeyup:logValue},
			//id:{label:'ID',type:'text', locked:true},
			id:{label:'ID',type:'guid'},
			
		//example of select that takes function (function is passed item)	
			animalLink:{label:'Link to other animal',type:'select', values:getAnimals},
			hiddenizer:{hidden:true}
		},
		schemas:{
			animal:animalschema,
			thing:thingschema			
		},
		compact:true
	}
	var JOE = new JsonObjectEditor(specs);
	JOE.init();
</script>
</body>
</html>
